<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Command-Line Scripts • rMVPA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Command-Line Scripts">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rMVPA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CommandLineScripts.html">Command-Line Scripts</a>
    </li>
    <li>
      <a href="../articles/CrossValidation.html">Cross-Validation Schemes</a>
    </li>
    <li>
      <a href="../articles/FeatureSelection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../articles/Regional_Analysis.html">Regional Analysis</a>
    </li>
    <li>
      <a href="../articles/Searchlight_Analysis.html">Searchlight Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Command-Line Scripts</h1>
                        <h4 class="author">Bradley Buchsbaum</h4>
            
            <h4 class="date">2019-03-10</h4>
      
      
      <div class="hidden name"><code>CommandLineScripts.Rmd</code></div>

    </div>

    
    
<div id="running-rmvpa-algorithms-from-the-command-line" class="section level2">
<h2 class="hasAnchor">
<a href="#running-rmvpa-algorithms-from-the-command-line" class="anchor"></a>Running rMVPA algorithms from the command line</h2>
<p><code>rMVPA</code> offers two main command-line executable R scripts that can be used to run most basic MVPA analyses. The goal of these scripts is to get users up and running without have to write full-blow R programs. Instead rMVPA can be controlled via a configuration file that specifies the data, design infromation, block structure, model parameters, etc. that are necessary to run an analysis.</p>
<p>There are currently two main scripts: <code>MVPA_Searchlight.R</code> and <code>MVPA_Regional.R</code>. These two scripts are very similar in their inputs and capabilities–the difference is really only that the former runs a “searchlight” analysis and the latter runs MVPA over some set of one or more regions of interest (ROI). For example, if one wished to run MVPA using a single large mask of visual cortex or over a set of Freesrufer-defined ROIs, one would opt for MVPA_Regional.R.</p>
</div>
<div id="installing-the-command-line-scripts" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-the-command-line-scripts" class="anchor"></a>Installing the command-line scripts</h2>
<p><code>MVPA_Searchlight.R</code> and <code>MVPA_Regional.R</code> are stored in the <code>scripts</code> sub-directory of the R project located here:</p>
<p><a href="https://github.com/bbuchsbaum/rMVPA" class="uri">https://github.com/bbuchsbaum/rMVPA</a></p>
<p>Of course, before you can the scripts, you need to have rMVPA installed. Easiest way is to open an R console and type following command, assuming <code>devtools</code> is alreeady installed. If not, first install the <code>devtools</code> package.</p>
<p>Installing the rMVPA package, however, will not install the command line scripts. Instead, you have to do this manually.</p>
</div>
<div id="using-wget-to-fetch-scripts-from-github" class="section level2">
<h2 class="hasAnchor">
<a href="#using-wget-to-fetch-scripts-from-github" class="anchor"></a>Using <code>wget</code> to fetch scripts from Github</h2>
<p>An easy way to do this is with the <code>wget</code> command.</p>
<p><code>wget https://raw.githubusercontent.com/bbuchsbaum/rMVPA/master/scripts/MVPA_Searchlight.R</code></p>
<p><code>wget https://raw.githubusercontent.com/bbuchsbaum/rMVPA/master/scripts/MVPA_Regional.R</code></p>
</div>
<div id="adding-scripts-to-your-bin-folder-and-making-them-executable" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-scripts-to-your-bin-folder-and-making-them-executable" class="anchor"></a>Adding scripts to your <code>bin</code> folder and making them executable</h2>
<p>Then, you generally want to move these to a <code>bin</code> directory either locally (e.g. <code>/home/username/bin</code> or at the system level <code>/usr/local/bin</code>).</p>
<p>e.g. <code>cp MVPA_*R /home/username/bin</code> where <code>username</code> is the name of your login id.</p>
<p>Finally, you need to make the script executable:</p>
<p><code>cd /home/username/bin</code> <code>chmod +x MVPA_Searchlight.R</code> <code>chmod +x MVPA_Regional.R</code></p>
<p>Now you can test whether the script is working (assuming that the files are on your <code>PATH</code>):</p>
<p><code>MVPA_Searchlight.R --help</code></p>
<p><code>MVPA_Regional.R --help</code></p>
</div>
<div id="searchlight-analyses-with-mvpa_searchlight-r" class="section level2">
<h2 class="hasAnchor">
<a href="#searchlight-analyses-with-mvpa_searchlight-r" class="anchor"></a>Searchlight analyses with MVPA_Searchlight.R</h2>
<div id="setting-up-a-configuration-file" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-up-a-configuration-file" class="anchor"></a>Setting up a configuration file</h3>
<p>To run a searchlight analysis we need a minimum of five pieces of information.</p>
<ul>
<li><p><strong>train_data</strong>: One or more NifTI 4D files containing trialwise (i.e. one value per voxel per trial) estimates of brain activity–often colloquially referrrd to as the “betas” because they are derived from single-trial regression analysis yielding a series of beta estimates.</p></li>
<li><p><strong>train_design</strong>: A tabular plain text file (“design file”“) which contains at a minimum the”label" associated with each image in the “betas” files.</p></li>
<li><p><strong>label_column</strong>: The name of the column in the above design file that holds the “labels”.</p></li>
<li><p><strong>model</strong>: the name of the classifier model such as <code>sda_notune</code> for tuning-parameter-free shrinkage discriminant analysis.</p></li>
<li><p><strong>output</strong>: the name of the folder to place the searchlight classification results.</p></li>
</ul>
<p>This information is included in a configuration file which can be a simple R source code file (e.g. “config.R”) or a YAML formatted file (e.g. config.yaml).</p>
<p>The following additional information can also be specified:</p>
<ul>
<li><p><strong>cross_validation</strong>: the cross-validation method to be used (see below for examples, also see “CrossValidation” vignette).</p></li>
<li><p><strong>mask</strong>: the name of a brain mask file that indicates the set of voxels to include in the searchlight.</p></li>
<li><p><strong>block_column</strong>: the name of the column in the design file that encodes the block structure of the experiment. This is especially important for fMRI designs, where the session is divided into contiguous “blocks” or “runs”. These blocks generally should be “kept together” during cross-validaiton based procedures. Thus, it is important in such cases to put this block information as a usually integer-valued column in the “train_design” tabular text file.</p></li>
<li><p><strong>radius</strong>: the radius in millimeters of the searchlight. The default value here is 8 but slightly smaller or larger values are also reasonable.</p></li>
<li><p><strong>normalize</strong>: whether to standardize each <em>image</em> in the training data by subtracting the mean image and dividing by the standard deviation. If successive trialwise estimates vary considerably in terms of whole-image variance or mean, then normalizing the images can be beneficial. On the other hand, if whole-brain mean/variance is a meaningful signal for your problem, then you may not want to normalize in this way.</p></li>
<li><p><strong>type</strong>: the <em>type</em> of the searchlight. This can either be “standard” or “randomized”. A standard searchlight involves estimating a classifier model at the center of over voel in the mask; a randomized searchlight uses an iterative montecarlo resampling approach to estimate the infromational contribution of each voxel to classification performance.</p></li>
<li><p><strong>niter</strong>: when <strong>type</strong> is “randomized” this parameter supplies the number of resampling iterations (default = 16).</p></li>
</ul>
</div>
</div>
<div id="an-example-configuation-file-" class="section level2">
<h2 class="hasAnchor">
<a href="#an-example-configuation-file-" class="anchor"></a>An example configuation file.</h2>
<p>Assume we have a training dataset consisting a set of 100 single trial “betas” collected over five runs and concatenated together into a single file called “betas.nii”.</p>
<p>Further assume our classiification goal is to predict whether a presented stimulus is one of four possible categories: <strong>face</strong>, <strong>scene</strong>, <strong>object</strong>, or <strong>word</strong>.</p>
<p>This information is included in a design file called “train_design.txt” that looks like this (first 5 rows only):</p>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="right">repnum</th>
<th align="right">run</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">face</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">scene</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">object</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">word</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">face</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Here is a minimal <code>config.R</code> file.</p>
<p>Now to run, we type the following command:</p>
<p><code>MVPA_Searchlight.R --config config.R</code></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#running-rmvpa-algorithms-from-the-command-line">Running rMVPA algorithms from the command line</a></li>
      <li><a href="#installing-the-command-line-scripts">Installing the command-line scripts</a></li>
      <li><a href="#using-wget-to-fetch-scripts-from-github">Using <code>wget</code> to fetch scripts from Github</a></li>
      <li><a href="#adding-scripts-to-your-bin-folder-and-making-them-executable">Adding scripts to your <code>bin</code> folder and making them executable</a></li>
      <li><a href="#searchlight-analyses-with-mvpa_searchlight-r">Searchlight analyses with MVPA_Searchlight.R</a></li>
      <li><a href="#an-example-configuation-file-">An example configuation file.</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Bradley Buchsbaum R..</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
