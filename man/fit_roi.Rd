% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/allgeneric.R, R/manova_model.R,
%   R/mvpa_model.R, R/rsa_model.R, R/vector_rsa_model.R, R/feature_rsa_model.R,
%   R/hrfdecoder_model.R, R/naive_xdec_model.R, R/repmap_model.R,
%   R/repmed_model.R, R/repnet_model.R, R/subspace_alignment_model.R,
%   R/feature_rsa_da_model.R
\name{fit_roi}
\alias{fit_roi}
\alias{fit_roi.manova_model}
\alias{fit_roi.mvpa_model}
\alias{fit_roi.rsa_model}
\alias{fit_roi.vector_rsa_model}
\alias{fit_roi.feature_rsa_model}
\alias{fit_roi.hrfdecoder_model}
\alias{fit_roi.naive_xdec_model}
\alias{fit_roi.repmap_model}
\alias{fit_roi.repmed_model}
\alias{fit_roi.repnet_model}
\alias{fit_roi.subspace_alignment_model}
\alias{fit_roi.feature_rsa_da_model}
\title{Fit a Model on a Single ROI}
\usage{
fit_roi(model, roi_data, context, ...)

\method{fit_roi}{manova_model}(model, roi_data, context, ...)

\method{fit_roi}{mvpa_model}(model, roi_data, context, ...)

\method{fit_roi}{rsa_model}(model, roi_data, context, ...)

\method{fit_roi}{vector_rsa_model}(model, roi_data, context, ...)

\method{fit_roi}{feature_rsa_model}(model, roi_data, context, ...)

\method{fit_roi}{hrfdecoder_model}(model, roi_data, context, ...)

\method{fit_roi}{naive_xdec_model}(model, roi_data, context, ...)

\method{fit_roi}{repmap_model}(model, roi_data, context, ...)

\method{fit_roi}{repmed_model}(model, roi_data, context, ...)

\method{fit_roi}{repnet_model}(model, roi_data, context, ...)

\method{fit_roi}{subspace_alignment_model}(model, roi_data, context, ...)

\method{fit_roi}{feature_rsa_da_model}(model, roi_data, context, ...)
}
\arguments{
\item{model}{The model specification object.}

\item{roi_data}{A list with components:
\describe{
  \item{train_data}{Numeric matrix (observations x features)}
  \item{test_data}{Numeric matrix or NULL}
  \item{indices}{Integer vector of voxel/vertex indices}
  \item{train_roi}{The raw ROI object (for models needing spatial info)}
  \item{test_roi}{The raw test ROI object or NULL}
}}

\item{context}{A list with components:
\describe{
  \item{design}{The design object}
  \item{cv_spec}{Cross-validation specification or NULL}
  \item{id}{ROI identifier (center voxel ID or region number)}
  \item{center_global_id}{Global index of center voxel or NA}
}}

\item{...}{Additional model-specific arguments.}
}
\value{
A \code{\link{roi_result}} object.
}
\description{
The primary dispatch point for per-ROI analysis in the new architecture.
Each model type implements this method to encapsulate its complete analysis
pipeline (including any internal cross-validation).

Computes mediation paths a, b, c' and the indirect effect in RDM space for
a single ROI/searchlight.

Computes representational connectivity metrics for a single ROI/searchlight.
}
\details{
Models that implement \code{fit_roi} are automatically preferred by
\code{\link{process_roi.default}} over the legacy dispatch chain
(\code{internal_crossval} / \code{external_crossval} / \code{train_model}).
}
\section{Architecture TODO}{
\code{fit_roi} is currently scoped to ROI/searchlight iteration.
Whole-brain global analysis uses \code{\link{run_global}} via a separate
\code{cv_run_global -> train_model} path. A future refactor may unify these
flows under a single fit contract.
}
\examples{
\donttest{
  # fit_roi is typically called internally by process_roi.default.
  # To implement for a new model class:
  # fit_roi.my_model <- function(model, roi_data, context, ...) {
  #   metrics <- c(accuracy = 0.85)
  #   roi_result(metrics, roi_data$indices, context$id)
  # }
}
}
\seealso{
\code{\link{roi_result}}, \code{\link{output_schema}},
  \code{\link{process_roi}}
}
